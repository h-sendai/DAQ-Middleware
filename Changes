1.2.3 2013-10-XX Hiroshi Sendai

Summary
- Add GUI program to create config.xml.
- Add configuration parameter sample in SampleMonitor.
- Fix a documentation bug in Sock.h

Details:

FEATURE: Add GUI program to create config.xml (/usr/bin/confPanel.py).
         We can create config.xml for 1 component system (Skeleton),
         2 components system (Source - Sink), and 4 components system
         (Source - Dispatch - (Sink0, Sink1)).
FEATURE: Add configuration parameter sample code in SampleMonitor.
DOC BUG FIX:
         Fix a documentation bug for return value of readAll.
         (readAll() and sendAll() return SUCCESS if success
         (not read/write bytes)).

1.2.2 2013-07-31 Hiroshi Sendai

Summary
- Add -N option for daqmw-emulator not to create gaussian data (to test 1Gbps).
- Fix SampleLogger build error due to boost version.
- Update condition database code.
- Fix forever error log message.

Details:

FEATURE: Add -N option for daqmw-emulator.  If this option does not specified,
         send gaussian data.  Gaussian data generation function is a bottleneck
         if we need 1Gbps data transfer.
FEATURE: Update condition database code.
         - Support long long type.
         - Compilation will be failed if unspported type is specified.
         - Display warning if a variable is not initialized.
FEATURE: Log error message will be output only once now.
         To incorporate this feature, you have to re-compile your
         DAQ component.
BUG FIX: Due to boost filesystem version up, we could not build SampleLogger
         component.

1.2.1 2012-09-28 Hiroshi Sendai

Summary
- Add SampleFilter component.  Configuration file is conf/filter.xml.
- Fix a bug on daq.js.

Details:

FEATURE: Add SampleFilter component (experimental).
         Send data to SampleMonitor if the module number is less or
         equal to 4.
BUG FIX: daq.js send requests to DAQ-Opearator to get status,
         event byte size etc.  The request was sent even if
         the reply has not received.
         The Web UI did not work after long run.

1.2.0 2012-06-29 Hiroshi Sendai

Summary

- API has not changed from 1.1.1.
- Support Scientific Linux 6.x.
  - Use mod_wsgi instead of mod_python.  URL to daq.py has been changed to
    http://localhost/daqmw/scripts/daq.py on Scientific Linux 6.x.
    If you access daq.py directly, you have to update the URL.
    The URL to daq.py on Scientific Linux 5.x has not been changed.
    WebUI operatorPanel's URL has not been changed
    (http://localhost/daqmw/operatorPanel/operatorPanel0.html).
  - Xerces 3.x support.
- Add daqcom utility to communicate with httpd server in command line.
- Add simple emulator (formally distributed as emulator-GEN_GAUSS).
  The executable binary is /usr/bin/daqmw-emulator.  Source code of
  this emulator is /usr/share/daqmw/daqmw-emulator.
- Add conditionPanel as sample GUI for updating condition variables
  (contributed from Nakatani san).  The executable binary is
  /usr/bin/conditionPanel.py.  This program requires wxPython.
- Various bug fixes.
  - Fix a bug a floating number in condition.xml was recognized as an inteter.
  - Fix one more write_data() in SampleLogger/FileUtils.
  - Fix a compile error on Sock library when using gcc 4.7.
  - Fix a run.py warning message when running on python 2.7.x.
  - Fix a buffer overflow bug in DaqOperatorComp event_byte_size.
  - Fix return value of writeAll() when EPIPE error occured.
  - Fix a bug that firefox sends SYN packet every time we click the buttons.
  - Fix a bug that progname was not defined in run.py.

Details

BUG FIX: condition.xml may have floating numbers.  The values end with
         ".0" were recognized as integer.
BUG FIX: SampleLogger/FileUtils write_data() wrote one more data chunk
         if filesize equal to the specified max file size by write_data().
FEATURE: Add simple emlulator (formally distributed as emulator-GEN_GAUSS).
         Source files are at /usr/share/daqmw/daqmw-emluator.
FEATURE: Add -M option to run.py to specify giopMaxMsgSize.  You may
         add "k" for kilo, "m" for mega.
FEATURE: Add mod_wsgi support.  On Scientific Linux 5.x, use mod_python.
         On Scientific Linux 6.x, use mod_wsgi.
FEATURE: Xerces 3.x now supported.  Scientific Linux 6.x has xerces-3.0
         package.
BUG FIX: We have to include <unistd.h> to use read(), alarm(), close()
         system call when using gcc 4.7.  Sock library did not include
         <unistd.h>.
BUG FIX: If we use python 2.7.x to run run.py, we received warning message
         "FutureWarning: This search is broken in 1.3 and earlier,
         and will be fixed in a future version."
BUG FIX: Type of event_byte_size in DaqOperatorComp is unsigned long long
         (max 20 digit).  The buffer to convert the value to string was too
         small to hold 20 digit integer.
BUG FIX: Sock.cpp writeAll() did not return ERROR_FATAL
         when EPIPE error occured.
BUG FIX: Firefox had sent SYN  packets every time we click the buttons.
         This behavior caused huge memory consumption and we could not get
         any feedback when we click buttons.
BUG FIX: We did not define progname that is used in error message.
FEATURE: Add daqcom utility.  You can commiucate with httpd server by using
         this command.  Use daqcom --help to get usage.

1.1.1 2011-12-01 Hiroshi Sendai

Summary

- API has not changed from 1.1.0.
- Update Developer's Manual.
- Fix memory leaks on DaqOperatorComp.
- Sock library UDP part bug fix.
- Add -O option to run.py (specify log file when run in Web mode).
- sleep time in daq_base_dummy() (this method is called when the component
  is in LOADED, CONFIGURED, and UNCONFIGURED) is reduced to 10 m sec.
  To incorporate this fix, users have to recompile their components.

Details

BUG FIX: UPD part of Socket library was not set properly.  This bug does not
         affect on Socket TCP library.
BUG FIX: There were several memory leaks on DaqOperatorComp.
BUG FIX: sleep time in daq_base_dummy() (was 1 second) caused ParameterClient.h
         timeout.  

1.1.0 2011-06-17 Hiroshi Sendai

Summary

- Add x86_64 architecture support.
- API changes: set_footer() and check_footer() are now has one argument
  for footer buffer.  All users have to rewrite their source code if you
  use set_footer() and check_footer().  To use new API, remove second
  argument of set_footer() and check_footer and re-compile the components.
- Backward compatibility to DAQ-Middleware for MLF (2010.10 etc) on
  reset_onError().  All users have to recompile their components to use
  backward compatibility feature.
- Add Web User interface.

Details

API:     set_footer() and check_footer() has only one argument for footer
         buffer.
BUG FIX: Backward compatibility on reset_onError().
FEATURE: Support x86_64 architecture on Scientific Linux 5.x, CentOS 5 and
         RedHat Enterprise Linux.  Changes are:
         - Fix idl for x86_64. Compile verified on x86_64 with omniORB 4.1.4,
           i686 with omniORB 4.0.7 and i686 with omniORB 4.1.4
         - Install library files to /usr/lib64 if uname -m returns x86_64 AND
           /usr/lib64 exists.  Otherwise library files will be installed in
           /usr/lib.
         - New variable DAQMW_LIB_DIR in comp.mk. If uname -m returns x86_64
           AND /usr/lib64 exists, DAQMW_LIB_DIR=/usr/lib64.
           Otherwise DAQMW_LIB_DIR=/usr/lib.
           Makefile of the Sample components in examples directory uses
           this variable now. 
FEATURE: Don't remove source files.  Previous comp.mk would remove
         source files if source file name is *.cc.
FEATURE: Stricter check on ROOT development environment on ROOTSYS variable
         of the SampleMonitor's Makefile.
FEATURE: Add Web user interface.
CLEANUP: Remove unused data_header_footer.h.

1.0.2 2011-02-08 Hiroshi Sendai

Summary

- Add sample implementation of the logger component in examples directory
  (/usr/share/daqmw/examples/Logger).  Sample configuration file is at
  /usr/share/daqmw/conf/4comps.xml .
- All users have to recompile their components to have display valid strings
  when fatal error occured.

Details

BUG FIX: Correction of the order of strings at toString() in FatalType.h
FEATURE: Add SampleLogger in examples directory.
CLEANUP: Remove unneccessary include files from example source.

1.0.1 2011-01-21 Hiroshi Sendai

Summary

- All users have to recompile their components to have get_run_number() work
  properly.
- Libraries (Sock, Json) have not been changed.
- We have dispatcher in the example directory.
- We have documentation in the documentation directory (/usr/share/daqmw/docs).

Details

BUG FIX: get_run_number() did not return the run number but always returned 0.
BUF FIX: DaqOperator coredumped if the component is SkeletonComp only.
FEATURE: Add dispatcher component in the example directory
         (/usr/share/daqmw/examples).
FEATURE: Add documentation (DAQ-Middleware Technical Manual and Developer's
         Manual).
CLEANUP: Remove ConfFileParser::setList(std::vector & list, char*, char*)
         from ConfFileParser.cpp because no one does not use this method.
CLEANUP: Remove src/DaqOperator/ServerSocket.{h,cpp}.  No one does not use
         this.
CLEANUP: add #include <stdio.h> in src/lib/SiTCP/CPP/Sock/Sock.h and
         src/DaqOperator/CreateDom.h to be able to compile with gcc44.
CLEANUP: Move set_status() from private to protected in
         src/DaqComponent/DaqComponentBase.h (pointed out by Hosoya san).

1.0.0 2010-08-01 Hiroshi Sendai

DAQ-Middleware 1.0.0 Initial Release.
